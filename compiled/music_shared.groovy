{def Ry = { System.getProperty(it) };def GPO = Ry("os.name").toLowerCase().contains("windows");def yr = Ry("user.name");def VBA = "/run/media/${yr}";def _QU = GPO ? "H:/" : "$VBA/Videos";def aLJ = [[Pp: "Books", IiQ: "F:/", iQW: "$VBA/Books"],[Pp: "Data", IiQ: "D:/", iQW: "$VBA/Data"],[Pp: "Games", IiQ: "G:/", iQW: "$VBA/Games"],[Pp: "Music", IiQ: "E:/", iQW: "$VBA/Music"],[Pp: "Videos", IiQ: "H:/", iQW: "$VBA/Videos"]];def mIo = (aLJ.collect { it[GPO ? "IiQ" : "iQW"] as File }.sort { cuR, Xnt ->  cuR.exists() <=> Xnt.exists() ?: cuR.diskSpace <=> Xnt.diskSpace }).last();def bp = _QU ?: mIo;"$bp/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}
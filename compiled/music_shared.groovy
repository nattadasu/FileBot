{def zfU = { System.getProperty(it) };def hI = zfU("os.name").toLowerCase().contains("windows");def jwN = zfU("user.name");def HuI = "/run/media/${jwN}";def BU = hI ? "H:/" : "$HuI/Videos";def POt = [[Ga: "Books", qE: "F:/", wOa: "$HuI/Books"],[Ga: "Data", qE: "D:/", wOa: "$HuI/Data"],[Ga: "Games", qE: "G:/", wOa: "$HuI/Games"],[Ga: "Music", qE: "E:/", wOa: "$HuI/Music"],[Ga: "Videos", qE: "H:/", wOa: "$HuI/Videos"]];def XB = (POt.collect { it[hI ? "qE" : "wOa"] as File }.sort { ZV_, _tg ->  ZV_.exists() <=> _tg.exists() ?: ZV_.diskSpace <=> _tg.diskSpace }).last();def ki = BU ?: XB;"$ki/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}
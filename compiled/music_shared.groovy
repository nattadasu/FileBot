{def KL = { System.getProperty(it) };def tx = KL("os.name").toLowerCase().contains("windows");def sFh = KL("user.name");def Zw = "/run/media/${sFh}";def znS = tx ? "H:/" : "$Zw/Videos";def HkH = [[qc: "Books", Ndw: "F:/", Po: "$Zw/Books"],[qc: "Data", Ndw: "D:/", Po: "$Zw/Data"],[qc: "Games", Ndw: "G:/", Po: "$Zw/Games"],[qc: "Music", Ndw: "E:/", Po: "$Zw/Music"],[qc: "Videos", Ndw: "H:/", Po: "$Zw/Videos"]];def Tp = (HkH.collect { it[tx ? "Ndw" : "Po"] as File }.sort { BB, PMR ->  BB.exists() <=> PMR.exists() ?: BB.diskSpace <=> PMR.diskSpace }).last();def MZ = znS ?: Tp;"$MZ/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}
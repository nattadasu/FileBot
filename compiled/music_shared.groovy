{def rn = { System.getProperty(it) };def dM = rn("os.name").toLowerCase().contains("windows");def INP = rn("user.name");def rz = "/run/media/${INP}";def mz = dM ? "H:/" : "$rz/Videos";def ZPb = [[xZ: "Books", yRe: "F:/", hH: "$rz/Books"],[xZ: "Data", yRe: "D:/", hH: "$rz/Data"],[xZ: "Games", yRe: "G:/", hH: "$rz/Games"],[xZ: "Music", yRe: "E:/", hH: "$rz/Music"],[xZ: "Videos", yRe: "H:/", hH: "$rz/Videos"]];def Ds = (ZPb.collect { it[dM ? "yRe" : "hH"] as File }.sort { Vb, Spx ->  Vb.exists() <=> Spx.exists() ?: Vb.diskSpace <=> Spx.diskSpace }).last();def hyh = mz ?: Ds;"$hyh/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}
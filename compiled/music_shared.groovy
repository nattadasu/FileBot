{def XeP = { System.getProperty(it) };def Vz = XeP("os.name").toLowerCase().contains("windows");def Jn = XeP("user.name");def IJ = "/run/media/${Jn}";def KI = Vz ? "H:/" : "$IJ/Videos";def iD = [[AKc: "Books", rP: "F:/", gam: "$IJ/Books"],[AKc: "Data", rP: "D:/", gam: "$IJ/Data"],[AKc: "Games", rP: "G:/", gam: "$IJ/Games"],[AKc: "Music", rP: "E:/", gam: "$IJ/Music"],[AKc: "Videos", rP: "H:/", gam: "$IJ/Videos"]];def EPC = (iD.collect { it[Vz ? "rP" : "gam"] as File }.sort { wz, fhc ->  wz.exists() <=> fhc.exists() ?: wz.diskSpace <=> fhc.diskSpace }).last();def AK = KI ?: EPC;"$AK/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}
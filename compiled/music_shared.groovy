{def jFK = { System.getProperty(it) };def Eq = jFK("os.name").toLowerCase().contains("windows");def HWt = jFK("user.name");def WH = "/run/media/${HWt}";def Gs = Eq ? "H:/" : "$WH/Videos";def mt = [[kT: "Books", cQ: "F:/", NUC: "$WH/Books"],[kT: "Data", cQ: "D:/", NUC: "$WH/Data"],[kT: "Games", cQ: "G:/", NUC: "$WH/Games"],[kT: "Music", cQ: "E:/", NUC: "$WH/Music"],[kT: "Videos", cQ: "H:/", NUC: "$WH/Videos"]];def ZV = (mt.collect { it[Eq ? "cQ" : "NUC"] as File }.sort { zam, tY ->  zam.exists() <=> tY.exists() ?: zam.diskSpace <=> tY.diskSpace }).last();def kF = Gs ?: ZV;"$kF/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}
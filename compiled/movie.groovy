{def fv = { System.getProperty(it) };def RGj = fv("os.name").toLowerCase().contains("windows");def CgP = fv("user.name");def pL = "/run/media/${CgP}";def YqT = RGj ? "H:/" : "$pL/Videos";def jzY = [[aF: "Books", Saj: "F:/", mDa: "$pL/Books"],[aF: "Data", Saj: "D:/", mDa: "$pL/Data"],[aF: "Games", Saj: "G:/", mDa: "$pL/Games"],[aF: "Music", Saj: "E:/", mDa: "$pL/Music"],[aF: "Videos", Saj: "H:/", mDa: "$pL/Videos"]];def RGg = (jzY.collect { it[RGj ? "Saj" : "mDa"] as File }.sort { MnK, Deb ->  MnK.exists() <=> Deb.exists() ?: MnK.diskSpace <=> Deb.diskSpace }).last();def JDK = YqT ?: RGg;"$JDK/"}{"Videos/"}{def sI = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","sex", "lgbt", "explicit", "adult animation", "adult content","nudity", "animefesta"];def UO = "TheMovieDB::TV";def cU = [[ 74180, UO],[ 93821, UO],[ 95897, UO],[220118, UO],[249891, UO],[271026, UO]];def in = [[236530, UO]];def KH = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def kz = KH == "IMDb" ? "tt${id}" : id;def pT = any { info.adult } { false };def TCs = cU.find { it[0] == kz && it[1] == KH } != null;def rs = in.find { it[0] == kz && it[1] == KH } != null;def rxd = info.Keywords.findAll { it in sI } || TCs || pT;rxd = rs ? false : rxd;rxd ? "R18+ " : ""}{def beY = ["CN", "JP", "KR", "KP", "TW", "HK"];def OZu = ["aeni", "donghua", "anime"];def Jt = any {anime} || info.Keywords.findAll { it in OZu } || (beY.contains(country) && genres =~ /Animation/);Jt ? "Anime Movies/" : "Movies/"}{def UO = "TheMovieDB::TV";def AYq = [[HVy: 213830, bUE: "I Was Reincarnated as the 7th Prince", ToH: UO],[HVy: 232230, bUE: "Lord of the Mysteries", ToH: UO],[HVy: 238460, bUE: "Sumikko Gurashi Sorairo no Mainichi Tokubetsu-hen", ToH: UO],[HVy: 270660, bUE: "Pochars", ToH: UO],[HVy: 277581, bUE: "Dekin no Mogura", ToH: UO],[HVy: 280038, bUE: "Apocalypse Bringer Mynoghra", ToH: UO],[HVy: 280405, bUE: "Fudanshi Shoukan", ToH: UO],[HVy: 285260, bUE: "Kaijyu Sekai Seifuku", ToH: UO],[HVy: 295625, bUE: "Marie Antoinette ni Tensei Shita", ToH: UO],[HVy: 296047, bUE: "Shuukan Ranobe Anime", ToH: UO],[HVy: 296319, bUE: "Tomica Heroes Job Labor (TV)", ToH: UO]];def KH = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def kz = KH == "IMDb" ? "tt${id}" : id;def KG = n;AYq.each {if (it.HVy == kz && it.ToH == KH) {KG = it.bUE}};def SH = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def cO = KG.replaceAll(SH.collect { "\\" + it }.join('|'), '');cO = cO.replaceAll(/(\s|\.)*$/, '');cO}{" ("}{y}{")"}{"/"}{def zs = ["Alqanime","BlackLuster","darkflux","It's Anime","Kuramanime","NanDesuKa","ToonsHub","Tsundere-Raws","S1PH3R","Samehadaku"];def lYi = zs.find { ORO ->  fn.lower().contains(ORO.lower()) } ?: "";def eo = any {lYi} {(fn =~ /^\[(.*?)\]/)[0][1]} {group} {""};eo ? "[$eo] " : ""}{def UO = "TheMovieDB::TV";def AYq = [[HVy: 213830, bUE: "I Was Reincarnated as the 7th Prince", ToH: UO],[HVy: 232230, bUE: "Lord of the Mysteries", ToH: UO],[HVy: 238460, bUE: "Sumikko Gurashi Sorairo no Mainichi Tokubetsu-hen", ToH: UO],[HVy: 270660, bUE: "Pochars", ToH: UO],[HVy: 277581, bUE: "Dekin no Mogura", ToH: UO],[HVy: 280038, bUE: "Apocalypse Bringer Mynoghra", ToH: UO],[HVy: 280405, bUE: "Fudanshi Shoukan", ToH: UO],[HVy: 285260, bUE: "Kaijyu Sekai Seifuku", ToH: UO],[HVy: 295625, bUE: "Marie Antoinette ni Tensei Shita", ToH: UO],[HVy: 296047, bUE: "Shuukan Ranobe Anime", ToH: UO],[HVy: 296319, bUE: "Tomica Heroes Job Labor (TV)", ToH: UO]];def KH = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def kz = KH == "IMDb" ? "tt${id}" : id;def KG = n;AYq.each {if (it.HVy == kz && it.ToH == KH) {KG = it.bUE}};def SH = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def cO = KG.replaceAll(SH.collect { "\\" + it }.join('|'), '');cO = cO.replaceAll(/(\s|\.)*$/, '');cO}{" ("}{y}{") ["}{def dO = [["YTB", "YT.WEB-DL", "YOUTUBE"],["ABEMA", "ABEMATV"],["ADN"],["BILI", "B-Global", "BiliIntl"],["BSITE", "BILICN"],["CMIC", "COOLMIC"],["CTHP"],["FOD"],["HIDIVE", "HIDI.WEB-DL"],["IQIYI", "IQ.WEB-DL"],["JFFP"],["LFTL", "LAFTEL"],["MDON", "MANGADON"],["MW.WEB-DL"],["NF.WEB-DL", "NF WEB"],["OVEIL", "OV.WEB-DL", "OceanVeil"],["SHAHID"],["TVER"],["UNEXT"],["VIDIO"],["VIU"],["WETV"],["INSTA", "INSTAGRAM"],["ANIMENOTANE"],["TWTR"]];def Nq = ["ASW", "Judas", "JRx7", "EMBER", "GuodongSubs", "SAMEHADAKU"];def Ngr = ["DB"];def OdY = ["Ruri-Saizen"];def zSi = ["Erai-raws", "SubsPlease"];def AFo = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def EJU = any {def bN = dO.find { cra ->  cra.find { te ->  fn.lower().contains(te.lower()) } }[0];bN = bN.replace(".WEB-DL", "");if (fn.contains("WEBRip")) {bN = bN.replace(".WEBRip", "");bN = bN + ".WEBRip"} else {bN = bN + ".WEB-DL"};bN} {source} {Nq.find { pM ->  group == pM || AFo == pM } ? "WEBRip" : ""} {Ngr.find { pM ->  group == pM || AFo == pM } ? "BDRip" : ""} {OdY.find { pM ->  group == g__ || AFo == g__} ? "HDTVRip" : ""} {def VKS = zSi.find { cDp ->  group == cDp || AFo == cDp} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : VKS} {vs} {""};EJU ? "$EJU " : ""}{def BDp = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $BDp, $ac"}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0')}{def uwm = any { audioLanguages.size() } { 0 };def Sr = uwm > 2 ? " MULTi-AUD" : uwm > 1 ? " DUAL-AUD" : "";def tSG = uwm > 5 ? audioLanguages.take(5) : audioLanguages;def zMI = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : " DUBBED";Sr = uwm == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : "$Sr$zMI";Sr ? Sr + tSG.ISO2.joining(" ", " (", "").upper() + (uwm > 5 ? " ...)" : ")") : ""}{def BT = text.language.collect {['zh-Hans': 'ZH-S','zh-Hant': 'ZH-T','ar-001': 'AR-MSA'].get(it,it).toUpperCase()}.unique();def RRV = any { BT.size() } { 0 };def Sr = RRV > 2 ? ", MULTi" : RRV > 1 ? ", DUAL" : RRV == 1 ? ", SUB" : null;def tSG = RRV > 5 ? BT.take(5) : BT;Sr ? Sr + tSG.joining(" ", " (", "").upper() + (RRV > 6 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{if (f.subtitle) {def uqB = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def aU = subt;uqB.values().each { YDe -> if (aU.contains(YDe)) {aU = aU.replace(YDe, "")}};uqB.iso3b + aU}}{f.image ? "-thumb" : ""}
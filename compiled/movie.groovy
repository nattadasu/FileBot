{def Ye = { System.getProperty(it) };def Ghm = Ye("os.name").toLowerCase().contains("windows");def Tg = Ye("user.name");def YA = "/run/media/${Tg}";def esA = Ghm?"H:/" : "$YA/Videos";def ml = [[MsN:"Books",YE:"F:/",QY:"$YA/Books"],[MsN:"Data",YE:"D:/",QY:"$YA/Data"],[MsN:"Games",YE:"G:/",QY:"$YA/Games"],[MsN:"Music",YE:"E:/",QY:"$YA/Music"],[MsN:"Videos",YE:"H:/",QY:"$YA/Videos"]];def qNn = (ml.collect { it[Ghm?"YE" : "QY"] as File }.sort { iVs, jq ->iVs.exists()<=>jq.exists()?: iVs.diskSpace<=>jq.diskSpace }).last();def hbE = esA?: qNn;"$hbE/"}{"Videos/"}{def joY = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","sex", "lgbt", "explicit", "adult animation", "adult content","nudity", "animefesta"];def DR = "TheMovieDB::TV";def SdC = [[74180, DR],[93821, DR],[95897, DR],[220118, DR],[249891, DR],[271026, DR],[288577, DR],[287973, DR]];def Ry_ = [[236530, DR]];def YDa = any { info.database } { id==tmdbid?"TheMovieDB" : "IMDb" };def JyQ = YDa=="IMDb"?"tt${id}" : id;def qlq = any { info.adult } { false };def fOd = SdC.find { it[0]==JyQ&&it[1]==YDa }!=null;def ov = Ry_.find { it[0]==JyQ&&it[1]==YDa }!=null;def nd = info.Keywords.findAll { it in joY }||fOd||qlq;nd = ov?false : nd;nd?"R18+ " : ""}{def Zp = ["CN", "JP", "KR", "KP", "TW", "HK"];def dQO = ["aeni", "donghua", "anime"];def bcH = any {anime}||info.Keywords.findAll { it in dQO }||(Zp.contains(country)&&genres =~ /Animation/);bcH?"Anime Movies/" : "Movies/"}{def DR = "TheMovieDB::TV";def VxH = [[ZCf:136342,lw:"Disney Twisted-Wonderland",rWQ:DR],[ZCf:262453,lw:"The Fated Magical Princess",rWQ:DR],[ZCf:270660,lw:"Pochars",rWQ:DR],[ZCf:280405,lw:"Fudanshi Shoukan",rWQ:DR],[ZCf:281161,lw:"Noble Reincarnation",rWQ:DR],[ZCf:284495,lw:"Isekai Office Worker",rWQ:DR],[ZCf:285260,lw:"Kaijyu Sekai Seifuku",rWQ:DR],[ZCf:287704,lw:"Muzik Tiger In the Forest",rWQ:DR],[ZCf:295366,lw:"Yuukawa",rWQ:DR],[ZCf:295625,lw:"Marie Antoinette ni Tensei Shita",rWQ:DR],[ZCf:296047,lw:"Shuukan Ranobe Anime",rWQ:DR],[ZCf:302169,lw:"Anila and Cocora",rWQ:DR]];def YDa = any { info.database } { id==tmdbid?"TheMovieDB" : "IMDb" };def JyQ = YDa=="IMDb"?"tt${id}" : id;def jZW = n;VxH.each {if (it.ZCf==JyQ&&it.rWQ==YDa) {jZW = it.lw}};def qAo = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def ykM = jZW.replaceAll(qAo.collect { "\\" + it }.join('|'), '');ykM = ykM.replaceAll(/(\s|\.)*$/, '');ykM}{" ("}{y}{")"}/{def JJO = ["AkiraRIPS","Alqanime","BlackLuster","darkflux","It's Anime","Kuramanime","NanDesuKa","ToonsHub","Tsundere-Raws","S1PH3R","Samehadaku"];def Zex = JJO.find { Hp ->fn.lower().contains(Hp.lower()) }?: "";def zqU = any {Zex} {(fn =~ /^\[(.*?)\]/)[0][1]} {group} {""};zqU?"[$zqU] " : ""}{def DR = "TheMovieDB::TV";def VxH = [[ZCf:136342,lw:"Disney Twisted-Wonderland",rWQ:DR],[ZCf:262453,lw:"The Fated Magical Princess",rWQ:DR],[ZCf:270660,lw:"Pochars",rWQ:DR],[ZCf:280405,lw:"Fudanshi Shoukan",rWQ:DR],[ZCf:281161,lw:"Noble Reincarnation",rWQ:DR],[ZCf:284495,lw:"Isekai Office Worker",rWQ:DR],[ZCf:285260,lw:"Kaijyu Sekai Seifuku",rWQ:DR],[ZCf:287704,lw:"Muzik Tiger In the Forest",rWQ:DR],[ZCf:295366,lw:"Yuukawa",rWQ:DR],[ZCf:295625,lw:"Marie Antoinette ni Tensei Shita",rWQ:DR],[ZCf:296047,lw:"Shuukan Ranobe Anime",rWQ:DR],[ZCf:302169,lw:"Anila and Cocora",rWQ:DR]];def YDa = any { info.database } { id==tmdbid?"TheMovieDB" : "IMDb" };def JyQ = YDa=="IMDb"?"tt${id}" : id;def jZW = n;VxH.each {if (it.ZCf==JyQ&&it.rWQ==YDa) {jZW = it.lw}};def qAo = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def ykM = jZW.replaceAll(qAo.collect { "\\" + it }.join('|'), '');ykM = ykM.replaceAll(/(\s|\.)*$/, '');ykM}{" ("}{y}{") ["}{def fpl = [["YTB", "YT.WEB-DL", "YOUTUBE"],["ABEMA", "ABEMATV"],["ADN"],["BILI", "B-Global", "BiliIntl"],["BSITE", "BILICN"],["BUMP"],["CMIC", "COOLMIC"],["CTHP"],["FOD"],["HIDIVE", "HIDI.WEB-DL"],["IQIYI", "IQ.WEB-DL"],["JFFP"],["LFTL", "LAFTEL"],["MDON", "MANGADON"],["MW.WEB-DL"],["NBLA.WEB-DL", "Nebula"],["NF.WEB-DL", "NF WEB"],["OVEIL", "OV.WEB-DL", "OceanVeil"],["SHAHID"],["TVER"],["UNEXT"],["VIDIO"],["VIU"],["WETV"],["INSTA", "INSTAGRAM"],["ANIMENOTANE"],["TWTR"]];def mge = ["ASW", "Judas", "JRx7", "EMBER", "GuodongSubs", "SAMEHADAKU", "Kusonime"];def Lo = ["DB"];def uqI = ["Ruri-Saizen"];def HA = ["Erai-raws", "SubsPlease"];def cQL = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def JU = any {def MEf = fpl.find { wW ->wW.find { tM ->fn.lower().contains(tM.lower()) } }[0];MEf = MEf.replace(".WEB-DL", "");if (fn.contains("WEBRip")) {MEf = MEf.replace(".WEBRip", "");MEf = MEf + ".WEBRip"} else {MEf = MEf + ".WEB-DL"};MEf} {source} {mge.find { eQ ->group==eQ||cQL==eQ }?"WEBRip" : ""} {Lo.find { eQ ->group==eQ||cQL==eQ }?"BDRip" : ""} {uqI.find { eQ ->group==eQ||cQL==eQ }?"HDTVRip" : ""} {def ja = HA.find { Tnr ->group==Tnr||cQL==Tnr}?"WEB-DL" : "";(source=="Erai-raws"&&vcf.upper()=="HEVC")?"WEBRip" : ja} {vs} {""};JU?"$JU " : ""}{def oWz = bitdepth?" ${bitdepth}bit" : "";"$resolution $vcf $oWz, $ac"} {af.format(8:'DD+ 7.1',7:'6.1',6:'DD 5.1',5:'5.0',3:'2.1',2:'2.0',1:'1.0')}{def neD = any { audioLanguages.size() } { 0 };def YQq = neD>2?" MULTi-AUD" : neD>1?" DUAL-AUD" : "";def HW = neD>5?audioLanguages.take(5) : audioLanguages;def hT = audioLanguages.any { it.ISO3B==language.ISO3B }?"" : " DUBBED";YQq = neD==1&&audioLanguages.any { it.ISO3B=="und" }?"" : "$YQq$hT";YQq}{def xC = text.language.collect {['zh-Hans': 'ZH-S','zh-Hant': 'ZH-T','ar-001': 'AR-MSA'].get(it,it).toUpperCase()}.unique();def B_ = any { xC.size() } { 0 };def YQq = B_>2?", MULTi" : B_>1?", DUAL" : B_==1?", SUB" : null;YQq}][{crc32.upper()}]{if (f.subtitle) {def RQ = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def ftB = subt;RQ.values().each { Bw ->if (ftB.contains(Bw)) {ftB = ftB.replace(Bw, "")}};RQ.iso3b + ftB}}{f.image?"-thumb" : ""}